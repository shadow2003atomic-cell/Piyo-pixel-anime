<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Opera GX - Piyo Pixel</title>
<style>
    /* BODY Y HEADER */
    body { margin:0; font-family: Arial; background:#0d0d0d; color:white; overflow-x:hidden; }
    header { background:#ff3399; padding:15px; text-align:center; font-size:1.5em; font-weight:bold; text-shadow: 1px 1px 2px #000; }

    /* TABS */
    #tabs { display:flex; gap:5px; background:#1a1a1a; padding:5px; overflow-x:auto; border-bottom:2px solid #ff3399; }
    .tab { padding:10px 15px; background:#2a2a2a; border-radius:5px 5px 0 0; cursor:pointer; min-width:120px; text-align:center; transition:0.2s; display:flex; justify-content:space-between; align-items:center; }
    .tab.active { background:#ff3399; color:white; font-weight:bold; }
    .tab button.close { background:transparent; border:none; color:white; cursor:pointer; font-weight:bold; margin-left:5px; }

    /* CONTROLES */
    #controls { display:flex; gap:5px; padding:5px; background:#2a2a2a; border-bottom:2px solid #ff3399; }
    #controls input { flex:1; padding:5px; border-radius:5px; border:none; }
    #controls button { background:#ff3399; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer; transition:0.2s; }
    #controls button:hover { background:#ff66cc; }

    /* IFRAME */
    #iframe-container { width:100%; height:70vh; border:2px solid #ff3399; border-radius:10px; overflow:hidden; margin:10px 0; position:relative; }
    iframe { width:100%; height:100%; border:none; }

    /* INDICADOR DE CARGA */
    #loading-bar { position:absolute; top:0; left:0; height:3px; background:#ff3399; width:0%; transition:0.3s; }

    /* BOTONES SONIDO */
    audio { display:none; }
</style>
</head>
<body>

<header>Mini Opera GX - Piyo Pixel</header>

<div id="tabs"></div>

<div id="controls">
    <button onclick="nuevaPestana()">+ Nueva Pestaña</button>
    <button onclick="recargar()">⟳</button>
    <button onclick="agregarFavorito()">★</button>
    <button onclick="toggleAdBlock()">Ad Block: Off</button>
    <input type="text" id="url" placeholder="Escribe una URL y presiona Enter" onkeypress="if(event.key==='Enter'){cargarURL();}">
    <button onclick="cargarURL()">Ir</button>
</div>

<div id="iframe-container">
    <div id="loading-bar"></div>
    <iframe id="iframe" src="https://example.com"></iframe>
</div>

<!-- SONIDOS -->
<audio id="sound-tab" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>
<audio id="sound-reload" src="https://www.soundjay.com/button/sounds/button-3.mp3"></audio>

<script>
let pestañas = [];
let actual = 0;
let adBlockActivo = false;

// CREAR NUEVA PESTAÑA
function crearTab(url) {
    const tab = document.createElement('div');
    tab.className = 'tab';
    tab.innerHTML = `<span>${url}</span><button class="close" onclick="cerrarPestana(event,this)">×</button>`;
    tab.onclick = () => cambiarPestana(pestañas.indexOf(tab));
    document.getElementById('tabs').appendChild(tab);
    pestañas.push(tab);
    cambiarPestana(pestañas.length - 1);
    reproducirSonido('sound-tab');
}

// CAMBIAR PESTAÑA
function cambiarPestana(index) {
    actual = index;
    const iframe = document.getElementById('iframe');
    iframe.src = pestañas[index].querySelector('span').textContent;
    pestañas.forEach((t,i)=>t.classList.toggle('active', i===index));
    document.getElementById('url').value = pestañas[index].querySelector('span').textContent;
}

// CERRAR PESTAÑA
function cerrarPestana(e,btn) {
    e.stopPropagation();
    const index = pestañas.indexOf(btn.parentElement);
    if(index===-1) return;
    btn.parentElement.remove();
    pestañas.splice(index,1);
    if(index===actual) cambiarPestana(pestañas.length-1>=0 ? pestañas.length-1 : 0);
    reproducirSonido('sound-tab');
}

// NUEVA PESTAÑA
function nuevaPestana() {
    const url = prompt('Ingresa la URL de la nueva pestaña:', 'https://example.com');
    if(url) crearTab(url.startsWith('http') ? url : 'https://' + url);
}

// CARGAR URL
function cargarURL() {
    let url = document.getElementById('url').value;
    if(!url) return;
    if(!url.startsWith('http')) url = 'https://' + url;

    // Ad Block básico
    if(adBlockActivo) {
        const bloqueadas = ['ads','doubleclick','banner','promotions'];
        for(const palabra of bloqueadas) {
            if(url.includes(palabra)) { alert("URL bloqueada por Ad Block"); return; }
        }
    }

    pestañas[actual].querySelector('span').textContent = url;
    recargar();
}

// RECARGAR
function recargar() {
    const iframe = document.getElementById('iframe');
    const loadingBar = document.getElementById('loading-bar');
    loadingBar.style.width = '0%';
    let width = 0;
    const interval = setInterval(() => {
        width += 10;
        loadingBar.style.width = width+'%';
        if(width>=100) clearInterval(interval);
    },50);
    iframe.src = pestañas[actual].querySelector('span').textContent;
    reproducirSonido('sound-reload');
}

// FAVORITOS
function agregarFavorito() {
    alert('Favorito agregado: ' + pestañas[actual].querySelector('span').textContent);
}

// AD BLOCK
function toggleAdBlock() {
    adBlockActivo = !adBlockActivo;
    alert("Ad Block " + (adBlockActivo ? "Activado" : "Desactivado"));
}

// SONIDO
function reproducirSonido(id) {
    const audio = document.getElementById(id);
    audio.currentTime = 0;
    audio.play();
}

// PESTAÑA INICIAL
crearTab('https://example.com');
</script>

</body>
</html>